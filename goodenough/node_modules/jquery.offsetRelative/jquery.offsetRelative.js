(function () {
  "use strict";
  
  var $ = this.jQuery || require('jquery');
  
  function offsetRelative(selector) {
    var $el = this;
    var $parent = $el.parent();
    if (selector) {
      $parent = $parent.closest(selector);
    }

    var elOffset     = $el.offset();
    var parentOffset = $parent.offset();

    return {
      left: elOffset.left - parentOffset.left,
      top: elOffset.top - parentOffset.top
    };
  }
  
  // Exports
  $.fn.offsetRelative || ($.fn.offsetRelative = offsetRelative);
  if (typeof module !== "undefined" && module !== null) {
    module.exports = $.fn.offsetRelative;
  }
}).call(this);